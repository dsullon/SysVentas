<div class="panel p" ng-controller="EvaluationCreateCtrl" ng-cloak>
  <div layout-gt-xs="row">
    <md-input-container class="md-block" flex-gt-sm>
        <label>Tipo</label>
        <md-select ng-model="type" style="width: 300px;" ng-change="onChange()">
          <md-option ng-repeat="type in types" value="{{type.id}}">
            {{type.name}}
          </md-option>
        </md-select>
      </md-input-container>
      <div flex-gt-sm class="date-picker-row">
        <label for="email" translate>Fecha inicio</label>
        <md-datepicker ng-model="startDate" md-min-date="minDate" md-placeholder="Inicio"></md-datepicker>
      </div>
      <div flex-gt-sm class="date-picker-row">
        <label for="email" translate>Fecha cierre</label>
        <md-datepicker ng-model="endDate" md-min-date="minEndDate" md-placeholder="Final"></md-datepicker>
      </div>
    </div>
    <md-input-container class="md-block">
      <label>Observaciones</label>
      <textarea ng-model="note" columns="1" md-maxlength="150" rows="3"></textarea>
    </md-input-container>
    <!-- START TAB PANEL-->
    <tabset class="tab-container">
      <tab active="true">
        <tab-heading>
          <i class="fa fa-users"></i> EVALUADORES
        </tab-heading>
        <div class="animated fadeIn">
          <button class="btn btn-addon btn-sm btn-default" ng-click="showEvaluatorList()">
                <i class="fa fa-user"></i>Agregar evaluador</button>
          <div class="b-t" flex>
            <md-list flex>
              <md-list-item class="md-3-line" ng-repeat="user in evaluators" ng-click="null">
                <img ng-src="images/employee/{{user.acronym | lowercase}}.jpg" class="md-avatar" alt="{{user.acronym}}" />
                <div class="md-list-item-text" layout="column">
                  <h3>{{user.name}}</h3>
                  <h4><small>{{user.position}}</small></h4>
                </div>
                <md-icon ng-click="showEvaluatedList($event, user)" aria-label="Mostrar evaluados" class="mdi-social-group md-secondary text-lg">
                  <md-tooltip>Mostrar evaluados</md-tooltip>
                </md-icon>
                <md-icon ng-click="removeEvaluator(user)" aria-label="Eliminar evaluados" class="mdi-action-delete md-secondary text-lg">
                  <md-tooltip>Eliminar evaluados</md-tooltip>
                </md-icon>
                <md-divider></md-divider>
              </md-list-item>
            </md-list>
          </div>
        </div>
      </tab>
      <tab>
        <tab-heading>
          <i class="fa fa-tasks"></i> PREGUNTAS DE EVALUACIÓN
        </tab-heading>
        <div class="animated fadeIn">
          <div class="b-t" flex>
            <div layout layout-sm="column">
              <md-input-container flex>
                <label>Criterio</label>
                <md-select ng-model="find" style="width: 400px;">
                  <md-option ng-repeat="criteria in criterias" value="{{criteria.id}}">
                    {{criteria.name}}
                  </md-option>
                </md-select>
              </md-input-container>
              <md-input-container flex>
                <md-radio-group ng-model="evalType" class="md-warn" layout="row">
                  <md-radio-button ng-value="'0'">EVALUADORES</md-radio-button>
                  <md-radio-button ng-value="'1'">EVALUADOS</md-radio-button>
                </md-radio-group>
              </md-input-container>
            </div>              
            <div class="md-list bg-white m-b">
              <div class="md-list-item inset" 
              ng-repeat="question in questionList | filter: {evaluation_criteria_id:find} | filter:{question_type:evalType}:true">
                <div class="md-list-item-left md-long-text circle green">
                  <i class="mdi-notification-event-note i-24"></i>
                </div>
                <div class="md-list-item-content">
                  <div class="col-sm-10">
                    <p>{{question.description}}</p>
                  </div>
                  <div class="col-sm-2">
                    <md-icon ng-click="removeQuestion(question)" aria-label="Quitar" class="mdi-action-delete text-lg">
                    </md-icon>
                  </div> 
                </div>
              </div>
            </div>
          </div>
        </div>
      </tab>
      <tab>
        <tab-heading>
          <i class="fa fa-comments-o"></i> COMENTARIOS DE EVALUACIÓN
        </tab-heading>
        <div class="animated fadeIn">
          <div class="b-t" flex>
            <div layout layout-sm="column">
              <md-input-container flex>
                <md-radio-group ng-model="evalType1" class="md-warn" layout="row">
                  <md-radio-button ng-value="'0'">EVALUADORES</md-radio-button>
                  <md-radio-button ng-value="'1'">EVALUADOS</md-radio-button>
                </md-radio-group>
              </md-input-container>
            </div>
            <div class="md-list bg-white m-b">
              <div class="md-list-item inset" ng-repeat="comment in commentList | filter:{comment_type:evalType1}:true">
                <div class="md-list-item-left md-long-text circle green">
                  <i class="mdi-editor-insert-comment i-24"></i>
                </div>
                <div class="md-list-item-content">
                  <div class="col-sm-10">
                    <p>{{comment.description}}</p>
                  </div>
                  <div class="col-sm-2">
                    <md-icon ng-click="removeComment(comment)" aria-label="Quitar" class="mdi-action-delete text-lg">
                    </md-icon>
                  </div> 
                </div>
              </div>
            </div>
          </div>
        </div>
      </tab>
    </tabset>
    <!-- END TAB PANEL-->
    <md-button class="md-warn md-raised md-hue-2" ng-click="save()">Grabar</md-button>
    <!--DIALOG EVALUATOR-->
    <div style="visibility: hidden">
      <div class="md-dialog-container" id="dialogEvaluator">
        <md-dialog aria-label="Lista de evaluadores">
          <md-toolbar>
            <div class="md-toolbar-tools deep-orange">
              <h2>Evaluadores</h2>
              <span flex></span>
              <md-button aria-label="Cancelar" ng-click="cancel()">
                <i class="mdi-navigation-close i-24"></i>
              </md-button>
            </div>
          </md-toolbar>
          <md-dialog-content style="min-width:350px; max-width:350px; max-height:350px;">
            <md-input-container class="md-block" flex-gt-sm>
              <label>Filtrar</label>
              <input ng-model="searchEvaluator">
            </md-input-container>
            <ul class="list-group md-whiteframe-z0" ng-repeat="user in availableEvaluators | filter:searchEvaluator | orderBy:'name'"
            ng-click="addEvaluator(user)">
              <li class="list-group-item">
                <div class="pull-left w-40 m-r">
                  <img ng-src="images/employee/small/{{user.acronym | lowercase}}.jpg" on-error-src="images/small/no-image.jpg" 
                  class="img-responsive img-circle" alt="{{user.acronym}}">
                </div>
                <div class="clear">
                  <a class="font-bold block">{{user.name}}</a>
                  <small>{{user.position}}</small>
                </div>
              </li>
            </ul>
          </md-dialog-content>
        </md-dialog>
      </div>
    </div>
    <!--END DIALOG EVALUATOR-->

    <!--DIALOG  EVALUATED-->
    <div style="visibility: hidden">
      <div class="md-dialog-container" id="dialogExaminated">
        <md-dialog aria-label="Lista de evaluados">
          <md-toolbar>
            <div class="md-toolbar-tools deep-orange">
              <h2>Evaluados</h2>
              <span flex></span>
              <md-button aria-label="Cancelar" ng-click="cancel()">
                <i class="mdi-navigation-close i-24"></i>
              </md-button>
            </div>
          </md-toolbar>
          <md-subheader>
            Evaluador: {{evaluatorSelected.name}}
            <md-input-container class="md-block" flex-gt-sm>
              <label>Filtrar</label>
              <input ng-model="searchEvaluated">
            </md-input-container>
          </md-subheader>
          <md-dialog-content style="min-width:350px; max-width:350px; max-height:350px;">
            <div class="md-whiteframe-z0 bg-white">
              <ul class="nav nav-lines nav-tabs nav-justified">
                <li class="active">
                  <a href data-toggle="tab" data-target="#tabE1">ASIGNADOS</a>
                </li>
                <li>
                  <a href data-toggle="tab" data-target="#tabE2">SIN ASIGNAR</a>
                </li>
              </ul>
              <div class="tab-content p m-b-md clear b-t b-t-2x">
                <div role="tabpanel" class="tab-pane animated fadeInDown active" id="tabE1">
                  <div class="b-t" flex>
                    <ul class="list-group md-whiteframe-z0" ng-repeat="user in evaluatorSelected.evaluateds | filter:searchEvaluated | orderBy:'name'"
                    ng-click="removeEvaluated(user)">
                      <li class="list-group-item">
                        <div class="pull-left w-40 m-r">
                          <img ng-src="images/employee/small/{{user.acronym | lowercase}}.jpg" on-error-src="images/small/no-image.jpg" 
                          class="img-responsive img-circle" alt="{{user.acronym}}">
                        </div>
                        <div class="clear">
                          <a class="font-bold block">{{user.name}}</a>
                          <small>{{user.position}}</small>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
                <div role="tabpanel" class="tab-pane animated fadeInDown" id="tabE2">
                  <div class="b-t" flex>
                    <ul class="list-group md-whiteframe-z0" ng-repeat="user in availableEvaluateds | filter:searchEvaluated | orderBy:'name'"
                    ng-click="addEvaluated(user)">
                      <li class="list-group-item">
                        <div class="pull-left w-40 m-r">
                          <img ng-src="images/employee/small/{{user.acronym | lowercase}}.jpg" on-error-src="images/small/no-image.jpg" 
                          class="img-responsive img-circle" alt="{{user.acronym}}">
                        </div>
                        <div class="clear">
                          <a class="font-bold block">{{user.name}}</a>
                          <small>{{user.position}}</small>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </md-dialog-content>
        </md-dialog>
      </div>
    </div>
    <!--END DIALOG EXAMINATED-->
</div>